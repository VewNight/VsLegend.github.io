# CAP理论
参考：[CAP theorem](https://en.wikipedia.org/wiki/CAP_theorem)

## 概念
CAP 原则， Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性）。
- Consistency：每次读取，都将获得最新一次的写入或者返回错误（error）。
- Availability：每次无错误（non-error）请求都将收到响应，但不保证收到的是最新的写入内容。
- Partition tolerance：尽管（组件）节点之间存在任意数量的消息丢失或延迟，但是系统仍继续运行。

## 网络分区
没有分布式系统可以防止网络故障，因此通常必须容忍网络分区。
CAP定理表明，在存在网络分区的情况下，必须在一致性和可用性之间进行选择：
- 选择一致性：取消操作，从而降低可用性，但确保一致性，系统总是处理查询并试图返回最新版本的可用信息，即使它不能保证它是最新的。
- 选择可用性：将继续进行操作，从而提供可用性，但存在不​​一致的风险，如果特定的信息不能保证是最新的，那么系统会返回一个错误或超时。

### 网络分区的实际用例
使用传统ACID设计的数据库系统（例如RDBMS：关系型数据库）会选择一致性而不是可用性
NoSQL等基于BASE原理设计的系统，会选择可用性而不是一致性。

## CAP注意事项
CAP经常被误解，好像必须始终选择放弃三项保证之一。实际上，只有在发生网络分区或故障时，才在一致性和可用性之间进行选择。在其他所有时间，都无需进行权衡。在没有网络故障的情况下（即，分布式系统正常运行时），可用性和一致性都可以得到满足。

