<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>函数式编程 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="导读：函数式编程，或称函数程序设计、泛函编程，是一种编程范式，它将电脑运算视为函数运算，并且避免使用程序状态以及易变对象。其中，λ演算为该语言最重要的基础。  函数式编程：Functional programming函数式编程的一些基本概念函数式编程，又称函数程序设计、泛函编程，是一种编程范式。  函数式编程的定义：简单来说：函数式编程就是将计算机的程序运算比作数学中的函数运算，函数运算的最终结果">
<meta property="og:type" content="article">
<meta property="og:title" content="函数式编程">
<meta property="og:url" content="http://example.com/2021/12/22/2021-05-22-Functional-Programming/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="导读：函数式编程，或称函数程序设计、泛函编程，是一种编程范式，它将电脑运算视为函数运算，并且避免使用程序状态以及易变对象。其中，λ演算为该语言最重要的基础。  函数式编程：Functional programming函数式编程的一些基本概念函数式编程，又称函数程序设计、泛函编程，是一种编程范式。  函数式编程的定义：简单来说：函数式编程就是将计算机的程序运算比作数学中的函数运算，函数运算的最终结果">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-22T07:32:13.047Z">
<meta property="article:modified_time" content="2021-12-22T07:05:39.199Z">
<meta property="article:author" content="Wang Junwei">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Lambda">
<meta property="article:tag" content="Stream">
<meta property="article:tag" content="functional programming">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2021-05-22-Functional-Programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/22/2021-05-22-Functional-Programming/" class="article-date">
  <time datetime="2021-12-22T07:32:13.047Z" itemprop="datePublished">2021-12-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      函数式编程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>导读：函数式编程，或称函数程序设计、泛函编程，是一种编程范式，它将电脑运算视为函数运算，并且避免使用程序状态以及易变对象。其中，λ演算为该语言最重要的基础。</p>
<hr>
<h2 id="函数式编程：Functional-programming"><a href="#函数式编程：Functional-programming" class="headerlink" title="函数式编程：Functional programming"></a>函数式编程：Functional programming</h2><h3 id="函数式编程的一些基本概念"><a href="#函数式编程的一些基本概念" class="headerlink" title="函数式编程的一些基本概念"></a>函数式编程的一些基本概念</h3><p>函数式编程，又称函数程序设计、泛函编程，是一种编程范式。</p>
<p><br><br></p>
<h4 id="函数式编程的定义："><a href="#函数式编程的定义：" class="headerlink" title="函数式编程的定义："></a>函数式编程的定义：</h4><p>简单来说：函数式编程就是将计算机的程序运算比作数学中的函数运算，函数运算的最终结果只能取决于输入值。当使用相同参数调用函数时，它将始终返回相同的结果。</p>
<p>规范来说：函数式编程有时被视为纯函数式编程的同义词，是将所有函数视为确定性数学函数或纯函数的函数式编程的一个子集。当使用一些给定参数调用纯函数时，它将始终返回相同的结果，并且不受任何可变状态或其他副作用(<strong>side effect</strong>)的影响。</p>
<p><br><br></p>
<h4 id="程序的副作用："><a href="#程序的副作用：" class="headerlink" title="程序的副作用："></a>程序的副作用：</h4><p>定义：如果一次操作、一个方法或一个表达式在其本地环境之外修改了一些变量的状态，那么就可以认为程序产生了副作用。</p>
<p>副作用包括修改非局部变量、修改静态局部变量、修改通过引用传递的可变参数、执行I/O或调用其他副作用函数。</p>
<p><strong>副作用的表现</strong>：</p>
<ul>
<li>在方法变更一个状态后将其从新变更为新的状态</li>
<li>在方法执行期间变更本地（非当前方法的局部变量）或全局的变量</li>
<li>方法执行未返回前的一次数据库保存操作</li>
<li>在方法中打印的日志</li>
<li>在方法中执行I/O操作</li>
</ul>
<br>

<h4 id="函数编程与数学函数："><a href="#函数编程与数学函数：" class="headerlink" title="函数编程与数学函数："></a>函数编程与数学函数：</h4><p>数学中的函数：将函数输入和输出相关联的表达式，函数的输出值始终依赖于函数的输入值。此外，多个函数可以组合成一个新的函数形式。</p>
<p>类似如下例子。表达式：y=x^2 - 1，输入：x=5，输出：y=24，且当x=5时，输出始终为24；</p>
<p>那么函数式编程也是类似的，有表达式：函数体（代码块），输入：方法参数，输出：返回值。</p>
<br>

<h4 id="设计函数式编程应该遵循的原则："><a href="#设计函数式编程应该遵循的原则：" class="headerlink" title="设计函数式编程应该遵循的原则："></a>设计函数式编程应该遵循的原则：</h4><ul>
<li>First-Class and Higher-Order Functions</li>
<li>纯函数</li>
<li>不变性</li>
<li>引用透明</li>
</ul>
<p>当然以上原则并不需要完全遵循，只是作为更为完美的函数设计的参考。下面将对上述的原则一一解释</p>
<p>⭐<strong>First-Class and Higher-Order Functions</strong></p>
<p><em><strong>First-Class Function</strong></em>：一等函数，即在一门编程语言中，函数与变量并没有实质区别，函数也可以同普通变量一样，作为参数传递给其他函数，或将它们作为其他函数的值返回，并将它们分配给变量或将它们存储在数据结构中。这就意味着，函数名称与普通变量一样，其将被定义为函数类型 + 函数名称，如同 int a一样，只是这里的函数名称实际是由代码块组成的函数运算块。</p>
<p><em><strong>Higher-Order Function</strong></em>：高阶函数有两以下两个特征：</p>
<ol>
<li>将一个或多个函数作为参数</li>
<li>将函数作为结果返回</li>
</ol>
<p><em><strong>一等函数和高阶函数的区别</strong></em>：</p>
<ol>
<li>一等函数针对编程语言：当某种语言具有一等函数特性时，那么该语言将会把函数视为普通变量。更常见的说法是“一种语言是否支持一等函数”。</li>
<li>高阶函数针对函数：高阶函数是对其他函数起作用的函数，当一个函数有N个函数作为参数或将函数作为返回值，那么该函数就是一个高阶函数。</li>
<li>这两件事密切相关，因为很难想象一种具有一流函数的语言不支持高阶函数，相反，很难想象具有高阶函数但没有一流函数支持的语言。</li>
</ol>
<p>⭐<strong>纯函数</strong>（Pure Functions）：即是没有副作用的函数。</p>
<p>⭐<strong>不变性</strong>（Immutability）：即一个对象被实例化后，其属性不能够被改变。这是语言级别的设计支持的。在 Java 中，我们必须自己创建不可变的数据结构（正如String、基本类型、math类一样）。<a target="_blank" rel="noopener" href="https://www.baeldung.com/immutables">Immutables</a>和<a target="_blank" rel="noopener" href="https://www.baeldung.com/intro-to-project-lombok">Project Lombok</a>提供了现成的框架，用于在 Java 中定义不可变数据结构。</p>
<p>⭐<strong>引用透明</strong>（Referential Transparency）：如果将表达式替换为其相应的值，且没有对程序的行为造成影响时，那么该表达式就是引用透明的。换句话说，引用透明的表达式没有副作用且具有不变性。</p>
<p>下面是baeldung的一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleData</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Logger logger = Logger.getGlobal();</span><br><span class="line">  <span class="keyword">private</span> String data;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    logger.log(Level.INFO, <span class="string">&quot;Get data called for SimpleData&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> SimpleData <span class="title">setData</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">    logger.log(Level.INFO, <span class="string">&quot;Set data called for SimpleData&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.data = data;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对logger的三个调用在语义上是等效的，但在引用上并不透明</span></span><br><span class="line">String data = <span class="keyword">new</span> SimpleData().setData(<span class="string">&quot;Baeldung&quot;</span>).getData();</span><br><span class="line"><span class="comment">// 不是引用透明的，因为它会产生副作用，其将会打印一条日志。如果我们像第三次调用一样用它的值替换这个调用，我们将不会打印该日志。</span></span><br><span class="line">logger.log(Level.INFO, <span class="keyword">new</span> SimpleData().setData(<span class="string">&quot;Baeldung&quot;</span>).getData());</span><br><span class="line"><span class="comment">// 不是引用透明的，因为SimpleData是可变的。</span></span><br><span class="line">logger.log(Level.INFO, data);</span><br><span class="line">logger.log(Level.INFO, <span class="string">&quot;Baeldung&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h4 id="函数式编程的作用："><a href="#函数式编程的作用：" class="headerlink" title="函数式编程的作用："></a>函数式编程的作用：</h4><p>采用函数式编程的最大优势是纯函数和不可变状态。大多数编程的挑战的根源在于副作用和可变状态。去掉它们会使我们的程序更易于阅读、推理、测试和维护。</p>
<p><br><br><br></p>
<hr>
<h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><p>函数式接口实际上只是函数式编程的定义，它将作为方法参数，被传给其他方法，而实现这些接口的方法一般被表现为lambda表达式（当然你也可以用一般接口的形式来实现函数式接口，也可以通过匿名内部类来实现，但lambda表达式实际上就是为了简化上述情况而产生的）。</p>
<p><br><br></p>
<h4 id="函数式接口的定义："><a href="#函数式接口的定义：" class="headerlink" title="函数式接口的定义："></a>函数式接口的定义：</h4><p>要定义一个函数式接口，需要满足以下两种情况</p>
<ol>
<li>使用@FunctionalInterface注解，标注接口为函数式接口</li>
<li>接口内部必须只有一个或以下的普通接口方法。但可以有任意数量的接口默认方法和接口静态方法，这些都不影响函数式接口的定义。</li>
</ol>
<p><br><br></p>
<h4 id="JDK中的函数式接口："><a href="#JDK中的函数式接口：" class="headerlink" title="JDK中的函数式接口："></a>JDK中的函数式接口：</h4><p><strong>Function</strong>：接受一个参数，并返回一个结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 接受一个参数，并返回一个结果</span></span><br><span class="line">    <span class="function">R <span class="title">apply</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// apply方法的组合实现 表示before.apply(v)的函数输出值r将作为this.apply(r)的输入值</span></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;V, R&gt; <span class="title">compose</span><span class="params">(Function&lt;? <span class="keyword">super</span> V, ? extends T&gt; before)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(before);</span><br><span class="line">        <span class="keyword">return</span> (V v) -&gt; apply(before.apply(v));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// apply方法的组合实现 表示this.apply(t)的函数输出值r将作为after.apply(r)的输入值</span></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; <span class="function">Function&lt;T, V&gt; <span class="title">andThen</span><span class="params">(Function&lt;? <span class="keyword">super</span> R, ? extends V&gt; after)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; after.apply(apply(t));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 函数将永远将输入参数作为输出参数</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; <span class="function">Function&lt;T, T&gt; <span class="title">identity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t -&gt; t;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<br>

<p><strong>Predicate</strong>：接受一个参数，返回Boolean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 接受一个参数，返回Boolean</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 表示两个Predicate的与判断 this.test(t) and a.test(t)</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">and</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; other)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; test(t) &amp;&amp; other.test(t);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 表示非Predicate的判断 !this.test(t)</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">negate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; !test(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 表示两个Predicate的或判断 this.test(t) or a.test(t)</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Predicate&lt;T&gt; <span class="title">or</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; other)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(other);</span><br><span class="line">        <span class="keyword">return</span> (t) -&gt; test(t) || other.test(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; <span class="function">Predicate&lt;T&gt; <span class="title">isEqual</span><span class="params">(Object targetRef)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">null</span> == targetRef)</span><br><span class="line">                ? Objects::isNull</span><br><span class="line">                : object -&gt; targetRef.equals(object);</span><br><span class="line">    </span><br></pre></td></tr></table></figure>


<br>


<p><strong>Supplier</strong>：无参返回一个结果。该函数可以接受无参构造方法、无参方法来返回一个结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Supplier</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参返回一个结果</span></span><br><span class="line">    <span class="function">T <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p><strong>Consumer</strong>：接受一个参数，并处理，无返回结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 接受一个参数，并处理，无返回结果</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(T t)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 组合操作 表示消费的先后顺序，当前实例消费完成后，after才开始消费</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Consumer&lt;T&gt; <span class="title">andThen</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; after)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; &#123; accept(t); after.accept(t); &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h4 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h4><p>使用上面的函数接口实现简单的判断和输出功能：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FITest</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断输入的密码是否正确 正确时计算并返回结果</span></span><br><span class="line">        FITest&lt;String, String&gt; fiTest = <span class="keyword">new</span> FITest&lt;&gt;();</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入密码： &quot;</span>);</span><br><span class="line">        String key = sc.next();</span><br><span class="line">        String result = fiTest.getIfTrue(key, <span class="comment">// 输入数据</span></span><br><span class="line">                k1 -&gt; k1 + <span class="string">&quot; Is Right KEY! &quot;</span>, <span class="comment">// Predicate判断为真时的回调方法</span></span><br><span class="line">                k2 -&gt; k2.equals(<span class="string">&quot;KEY&quot;</span>) <span class="comment">// 判断条件</span></span><br><span class="line">        );</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断正确时打印输出</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getIfTrue</span><span class="params">(T t, Function&lt;T, R&gt; function, Predicate&lt;T&gt; predicate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!predicate.test(t)) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> function.apply(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入输出结果</span></span><br><span class="line">请输入密码： NKEY</span><br><span class="line"><span class="keyword">null</span></span><br><span class="line">密码错误！</span><br><span class="line">----------------------</span><br><span class="line">请输入密码： KEY</span><br><span class="line">KEY Is Right KEY! </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><br><br><br></p>
<hr>
<h3 id="Lambda表达式：Lambda-Expressions"><a href="#Lambda表达式：Lambda-Expressions" class="headerlink" title="Lambda表达式：Lambda Expressions"></a>Lambda表达式：Lambda Expressions</h3><h4 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h4><p>即是一个<strong>匿名函数</strong>，即没有函数名的函数。Lambda表达式可以让我们不用实现函数式接口，而是通过函数体完成其接口方法。Lambda是实现回调函数（callback function）的一种方式。</p>
<p><br><br></p>
<h4 id="结构："><a href="#结构：" class="headerlink" title="结构："></a>结构：</h4><p>（输入 +） 函数体 （+ 输出）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入(String a)   </span></span><br><span class="line"><span class="comment">// &quot;-&gt;&quot; 符号后的部分都可以当作函数体 </span></span><br><span class="line"><span class="comment">// 输出一个String类型的变量upper</span></span><br><span class="line">(String a) -&gt; &#123;</span><br><span class="line">    String upper = a.toUpperCase();</span><br><span class="line">    System.out.println(upper);</span><br><span class="line">    <span class="keyword">return</span> upper;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h4 id="语法规则："><a href="#语法规则：" class="headerlink" title="语法规则："></a>语法规则：</h4><ol>
<li>声明类型、不声明类型</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">int</span> a, <span class="keyword">int</span> b) -&gt; a + b</span><br><span class="line"></span><br><span class="line">(a, b) -&gt; a - b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 前面两个表达式含义相同，相当于下面的方法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a +b;</span><br></pre></td></tr></table></figure>



<p>注意：单个参数需要声明类型时，必须使用“()”圆括号。<br><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个入参</span></span><br><span class="line">(List&lt;String&gt; l) -&gt; &#123;</span><br><span class="line">  l.forEach(element -&gt; System.out.println(element));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>



<ol start="2">
<li>有输入参数、没有输入参数</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(String a) -&gt; <span class="keyword">new</span> String(a)</span><br><span class="line"><span class="comment">// 需要一个没有内容的括号表示无参</span></span><br><span class="line">() -&gt; <span class="keyword">new</span> String()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上相当于一个是有参方法，一个是无参方法</span></span><br><span class="line"><span class="function">String <span class="title">newStr</span><span class="params">(String a)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> String(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">String <span class="title">newStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> String();</span><br></pre></td></tr></table></figure>

<br>

<ol start="3">
<li>单条执行语句、多条执行语句</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">() -&gt; <span class="string">&quot;lambda&quot;</span>.toUpperCase()</span><br><span class="line"></span><br><span class="line">() -&gt; &#123;</span><br><span class="line">    <span class="comment">// other statement</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;lambda&quot;</span>.toUpperCase();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：单条语句可以省去“{}”</p>
<br>

<ol start="4">
<li>带有输出的Lambda表达式、不带有输出</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有返回值</span></span><br><span class="line">(List&lt;String&gt; list) -&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(List&lt;String&gt; list) -&gt; list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 无返回值</span></span><br><span class="line">(List&lt;String&gt; list) -&gt; &#123;</span><br><span class="line">    list.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(List&lt;String&gt; list) -&gt; list.clear()</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>当函数体只有一条且为输出语句时，需要确保简写表达式语句有返回值</li>
<li>当无返回值的表达式只有一条时，需要确保简写表达式不会有返回值</li>
</ol>
<p><br><br><br></p>
<hr>
<h3 id="方法引用：Method-Reference"><a href="#方法引用：Method-Reference" class="headerlink" title="方法引用：Method Reference"></a>方法引用：Method Reference</h3><h4 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h4><p>当使用一个Lambda表达式创建一个匿名函数时，如果该函数什么都不做，仅仅只是调用一个现有的方法时，就可以使用方法的名字来代表该方法的调用。</p>
<br>

<p>方法引用即是用现有方法的名字，来紧凑的表达一个易于阅读的Lambda表达式。</p>
<br>

<p>方法引用使用两个冒号 <strong>::</strong> 表示</p>
<p><br><br></p>
<h4 id="方法引用种类："><a href="#方法引用种类：" class="headerlink" title="方法引用种类："></a>方法引用种类：</h4><table>
<thead>
<tr>
<th>种类</th>
<th>句法</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>引用静态方法</td>
<td>ContainingClass::staticMethodName</td>
<td>Person::compareByAgeMethodReferencesExamples::appendStrings</td>
</tr>
<tr>
<td>引用类的实例对象的方法</td>
<td>containingObject::instanceMethodName</td>
<td>myComparisonProvider::compareByNamemyApp::appendStrings2</td>
</tr>
<tr>
<td>引用特殊类型的任意对象的实例方法</td>
<td>ContainingType::methodName</td>
<td>String::compareToIgnoreCaseString::concat</td>
</tr>
<tr>
<td>引用构造函数</td>
<td>ClassName::new</td>
<td>HashSet::new</td>
</tr>
</tbody></table>
<br>
下面的代码是Oracle文档的一段代码实例：

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.BiFunction;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodReferencesExamples</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">mergeThings</span><span class="params">(T a, T b, BiFunction&lt;T, T, T&gt; merger)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> merger.apply(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">appendStrings</span><span class="params">(String a, String b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">appendStrings2</span><span class="params">(String a, String b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        MethodReferencesExamples myApp = <span class="keyword">new</span> MethodReferencesExamples();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Calling the method mergeThings with a lambda expression</span></span><br><span class="line">        System.out.println(MethodReferencesExamples.</span><br><span class="line">            mergeThings(<span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;World!&quot;</span>, (a, b) -&gt; a + b));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Reference to a static method</span></span><br><span class="line">        System.out.println(MethodReferencesExamples.</span><br><span class="line">            mergeThings(<span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;World!&quot;</span>, MethodReferencesExamples::appendStrings));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Reference to an instance method of a particular object        </span></span><br><span class="line">        System.out.println(MethodReferencesExamples.</span><br><span class="line">            mergeThings(<span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;World!&quot;</span>, myApp::appendStrings2));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Reference to an instance method of an arbitrary object of a</span></span><br><span class="line">        <span class="comment">// particular type</span></span><br><span class="line">        System.out.println(MethodReferencesExamples.</span><br><span class="line">            mergeThings(<span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;World!&quot;</span>, String::concat));</span><br><span class="line">   </span><br></pre></td></tr></table></figure>

<p><br><br></p>
<p><strong>结语</strong>：花费了大概一周的空闲时间，终于对函数式编程有了初步的了解，接下来，将会继续学习函数式编程在Java中的实际应用：Stream流式操作。也希望能在实际的编码中能写出优美、可读性强且可维护性高的函数式编程语句，加油！</p>
<p>当然，如果文中有错误，也希望能即时提醒。</p>
<p><br><br></p>
<hr>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Lambda Expressions</a></p>
<p><a target="_blank" rel="noopener" href="https://www.baeldung.com/java-functional-programming">Functional Programming in Java</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Functional_programming">Functional programming</a><br><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">Method References</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10141124/any-difference-between-first-class-function-and-high-order-function">Any difference between First Class Function and High Order Function</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30849591/article/details/95599961">first-class functions：函数是一等公民</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Higher-order_function">Higher-order_function</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/First-class_function">First-class_function</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">Side effect</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/12/22/2021-05-22-Functional-Programming/" data-id="ckxh8313m00055cv1ezjhe91b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Lambda/" rel="tag">Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stream/" rel="tag">Stream</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/12/22/2021-05-28-redis-data-structure/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          redis基础知识和底层数据结构
        
      </div>
    </a>
  
  
    <a href="/2021/12/22/2021-05-21-JAVA-reflection/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">java反射机制</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lambda/" rel="tag">Lambda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reflection/" rel="tag">Reflection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stream/" rel="tag">Stream</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/functional-programming/" rel="tag">functional programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/key-value/" rel="tag">key-value</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread-pool/" rel="tag">thread pool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E5%B0%84/" rel="tag">反射</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Lambda/" style="font-size: 10px;">Lambda</a> <a href="/tags/Reflection/" style="font-size: 10px;">Reflection</a> <a href="/tags/Stream/" style="font-size: 10px;">Stream</a> <a href="/tags/concurrency/" style="font-size: 20px;">concurrency</a> <a href="/tags/functional-programming/" style="font-size: 10px;">functional programming</a> <a href="/tags/key-value/" style="font-size: 10px;">key-value</a> <a href="/tags/redis/" style="font-size: 20px;">redis</a> <a href="/tags/thread-pool/" style="font-size: 20px;">thread pool</a> <a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 10px;">反射</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/22/2021-08-03-java-concurrency-2/">Java并发： 使用CompletionService来接收线程池计算的结果</a>
          </li>
        
          <li>
            <a href="/2021/12/22/2021-08-03-java-concurrency-1/">Java并发： 多线程的异常捕获</a>
          </li>
        
          <li>
            <a href="/2021/12/22/2021-05-28-redis-key-value/">redis常用键值对解析</a>
          </li>
        
          <li>
            <a href="/2021/12/22/2021-05-28-redis-data-structure/">redis基础知识和底层数据结构</a>
          </li>
        
          <li>
            <a href="/2021/12/22/2021-05-22-Functional-Programming/">函数式编程</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Wang Junwei<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>